# 🧠 ScreenMind 浏览器扩展

ScreenMind 浏览器扩展让您可以在任何网页上使用全局快捷键进行智能截屏分析，完美解决了后台运行和跨标签页使用的需求。

## ✨ 主要功能

- 🌍 **全局快捷键**: 在任何网站都可以使用 `Cmd+Shift+S` (Mac) 或 `Ctrl+Shift+S` (Windows/Linux) 进行截屏
- 🤖 **智能分析**: 自动调用 ScreenMind AI 分析截屏内容
- 🔔 **实时通知**: 分析完成后显示系统通知
- 📱 **弹窗界面**: 美观的弹窗显示分析结果和控制选项
- ⚙️ **设置页面**: 完整的配置界面，支持自定义服务器地址等
- 💾 **历史记录**: 保存截屏和分析历史
- 🎯 **后台运行**: 扩展在后台持续运行，无需保持特定标签页

## 🚀 安装方法

### 1. 开发者模式安装

1. 打开 Chrome 浏览器
2. 访问 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择 `screenmind-extension` 文件夹
6. 扩展安装完成！

### 2. 确保 ScreenMind 服务运行

确保 ScreenMind 后端服务正在运行：
```bash
cd screenmind-web
python start.py
```

## 📖 使用方法

### 快捷键截屏
- **Mac**: `⌘ Cmd + ⇧ Shift + S`
- **Windows/Linux**: `Ctrl + Shift + S`

在任何网页上按下快捷键即可触发截屏分析！

### 弹窗操作
1. 点击浏览器工具栏中的 ScreenMind 图标
2. 查看服务器状态和最近的分析结果
3. 点击"开始截屏分析"按钮手动截屏
4. 调整自动分析和通知设置

### 设置配置
1. 右键点击扩展图标，选择"选项"
2. 或在扩展管理页面点击"详细信息" → "扩展程序选项"
3. 配置服务器地址、功能开关等设置

## ⚙️ 配置选项

### 服务器设置
- **服务器地址**: 默认 `http://localhost:8000`
- **连接状态**: 实时显示服务器连接状态

### 功能设置
- **自动分析截屏**: 截屏后自动进行 AI 分析
- **显示通知**: 分析完成后显示系统通知
- **保存截屏历史**: 在本地保存截屏和分析记录

### 高级设置
- **分析超时时间**: 10-120 秒，默认 30 秒
- **最大历史记录数**: 10-1000 条，默认 100 条

## 🔧 技术架构

### 文件结构
```
screenmind-extension/
├── manifest.json          # 扩展配置文件
├── background.js          # 后台脚本（监听快捷键、API调用）
├── content.js            # 内容脚本（显示结果）
├── popup.html            # 弹窗界面
├── popup.js              # 弹窗逻辑
├── options.html          # 设置页面
├── options.js            # 设置逻辑
├── icon.svg              # 扩展图标
└── README.md             # 说明文档
```

### 工作流程
1. **快捷键监听**: `background.js` 监听全局快捷键
2. **截屏捕获**: 使用 Chrome API 捕获当前标签页
3. **API 调用**: 将截屏发送到 ScreenMind 后端分析
4. **结果显示**: 通过 `content.js` 在页面上显示分析结果
5. **通知提醒**: 显示系统通知告知用户分析完成

## 🛠️ 开发说明

### 权限说明
- `activeTab`: 访问当前活动标签页进行截屏
- `storage`: 保存用户设置和历史记录
- `notifications`: 显示系统通知
- `commands`: 注册全局快捷键

### API 接口
扩展调用以下 ScreenMind API：
- `POST /api/v1/screenshot`: 截屏分析接口
- `GET /api/v1/health`: 健康检查接口

### 存储机制
- `chrome.storage.sync`: 同步用户设置
- `chrome.storage.local`: 本地历史记录

## 🐛 故障排除

### 快捷键不工作
1. 检查扩展是否已启用
2. 确认快捷键没有被其他应用占用
3. 重新加载扩展

### 服务器连接失败
1. 确认 ScreenMind 后端服务正在运行
2. 检查服务器地址配置是否正确
3. 查看浏览器控制台错误信息

### 截屏失败
1. 确认浏览器有截屏权限
2. 检查当前页面是否为特殊页面（如 chrome:// 页面）
3. 重新加载当前页面

## 📝 更新日志

### v1.0.0
- ✅ 实现全局快捷键截屏功能
- ✅ 添加智能 AI 分析
- ✅ 创建弹窗和设置界面
- ✅ 支持通知和历史记录
- ✅ 完整的错误处理和状态管理

## 🤝 贡献

欢迎提交 Issue 和 Pull Request 来改进这个扩展！

## 📄 许可证

MIT License - 详见 LICENSE 文件